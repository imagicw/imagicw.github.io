<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡ - Î›.W.log</title><meta name="Description" content="æœ¬æ–‡æ˜¯åšä¸»å­¦ä¹ èµ«å°”è¾›åŸºå¤§å­¦çš„ å…¨æ ˆå…¬å¼€è¯¾2020 è¿‡ç¨‹ä¸­çš„å­¦ä¹ ç¬”è®°ï¼Œæ–‡ç« åˆ†ç±»ç»“æ„ä¸è¯¾ç¨‹ä¼šæœ‰äº›è®¸ä¸åŒï¼Œæœ¬æ–‡éƒ¨åˆ†å†…å®¹å¼•ç”¨è‡ªåŸæ–‡ã€‚"><meta property="og:title" content="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡" />
<meta property="og:description" content="æœ¬æ–‡æ˜¯åšä¸»å­¦ä¹ èµ«å°”è¾›åŸºå¤§å­¦çš„ å…¨æ ˆå…¬å¼€è¯¾2020 è¿‡ç¨‹ä¸­çš„å­¦ä¹ ç¬”è®°ï¼Œæ–‡ç« åˆ†ç±»ç»“æ„ä¸è¯¾ç¨‹ä¼šæœ‰äº›è®¸ä¸åŒï¼Œæœ¬æ–‡éƒ¨åˆ†å†…å®¹å¼•ç”¨è‡ªåŸæ–‡ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://x.awo.design/2020/11/fullstackopen-server/" /><meta property="og:image" content="https://x.awo.design/img/W.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-10T12:30:00+08:00" />
<meta property="article:modified_time" content="2020-11-10T12:39:55+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://x.awo.design/img/W.jpg"/>

<meta name="twitter:title" content="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡"/>
<meta name="twitter:description" content="æœ¬æ–‡æ˜¯åšä¸»å­¦ä¹ èµ«å°”è¾›åŸºå¤§å­¦çš„ å…¨æ ˆå…¬å¼€è¯¾2020 è¿‡ç¨‹ä¸­çš„å­¦ä¹ ç¬”è®°ï¼Œæ–‡ç« åˆ†ç±»ç»“æ„ä¸è¯¾ç¨‹ä¼šæœ‰äº›è®¸ä¸åŒï¼Œæœ¬æ–‡éƒ¨åˆ†å†…å®¹å¼•ç”¨è‡ªåŸæ–‡ã€‚"/>
<meta name="application-name" content="Î›.W.log">
<meta name="apple-mobile-web-app-title" content="Î›.W.log"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://x.awo.design/2020/11/fullstackopen-server/" /><link rel="prev" href="https://x.awo.design/2020/10/fullstackopen-javascript-and-react/" /><link rel="next" href="https://x.awo.design/2020/12/fullstackopen-nodejs-express/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.055364f5be272caa092b0e6654c165828707f8ab971e2656383a6d6392bc345e.css" integrity="sha256-BVNk9b4nLKoJKw5mVMFlgocH&#43;KuXHiZWODptY5K8NF4="><link rel="stylesheet" href="/css/style.min.1e2694bed152fa2922dbe909a441838ed693d88b1330f97485bfa8ed78da42df.css" integrity="sha256-HiaUvtFS&#43;iki2&#43;kJpEGDjtaT2IsTMPl0hb&#43;o7XjaQt8="><link rel="stylesheet" href="/lib/fontawesome-free/all.min.876d023d9d10c97941b80c3b03e2a5b94631ff7a4af9cee5604a6a2d39718d84.css" integrity="sha256-h20CPZ0QyXlBuAw7A&#43;KluUYx/3pK&#43;c7lYEpqLTlxjYQ="><link rel="stylesheet" href="/lib/animate/animate.min.3c770e90f98eb21b0c042fafb49755af93306fbaf42e449524f94fae9fc83295.css" integrity="sha256-PHcOkPmOshsMBC&#43;vtJdVr5Mwb7r0LkSVJPlPrp/IMpU="><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/x.awo.design\/2020\/11\/fullstackopen-server\/"
        },"genre": "posts","keywords": "React, JavaScript","wordcount":  6663 ,
        "url": "https:\/\/x.awo.design\/2020\/11\/fullstackopen-server\/","datePublished": "2020-11-10T12:30:00+08:00","dateModified": "2020-11-10T12:39:55+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "imagicw"
            },"description": "æœ¬æ–‡æ˜¯åšä¸»å­¦ä¹ èµ«å°”è¾›åŸºå¤§å­¦çš„ å…¨æ ˆå…¬å¼€è¯¾2020 è¿‡ç¨‹ä¸­çš„å­¦ä¹ ç¬”è®°ï¼Œæ–‡ç« åˆ†ç±»ç»“æ„ä¸è¯¾ç¨‹ä¼šæœ‰äº›è®¸ä¸åŒï¼Œæœ¬æ–‡éƒ¨åˆ†å†…å®¹å¼•ç”¨è‡ªåŸæ–‡ã€‚"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Î›.W.log">ğŸ› A.W.Log</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ‰€æœ‰æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><a class="menu-item" href="/categories/notes"> ç¬”è®° </a><a class="menu-item" href="/books/"> é˜…è¯» </a><a class="menu-item" href="/games/"> æ¸¸æˆ </a><a class="menu-item" href="/drummer/"> é¼“æ‰‹ </a><a class="menu-item" href="/10000/"> ä¸€ä¸‡æ¬¡æ‚²ä¼¤ </a><a class="menu-item" href="/about/"> å…³äº </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Î›.W.log">ğŸ› A.W.Log</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ‰€æœ‰æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a class="menu-item" href="/categories/notes" title="">ç¬”è®°</a><a class="menu-item" href="/books/" title="">é˜…è¯»</a><a class="menu-item" href="/games/" title="">æ¸¸æˆ</a><a class="menu-item" href="/drummer/" title="">é¼“æ‰‹</a><a class="menu-item" href="/10000/" title="">ä¸€ä¸‡æ¬¡æ‚²ä¼¤</a><a class="menu-item" href="/about/" title="">å…³äº</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://awo.design" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>imagicw</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/notes/"><i class="far fa-folder fa-fw"></i>ç¬”è®°</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-11-10">2020-11-10</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 6663 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 14 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ä»æ¸²æŸ“é›†åˆåˆ°æ¨¡å—å­¦ä¹ ">ä»æ¸²æŸ“é›†åˆåˆ°æ¨¡å—å­¦ä¹ </a>
          <ul>
            <li><a href="#javascript-arrays-jsæ•°ç»„">JavaScript Arrays JSæ•°ç»„</a></li>
            <li><a href="#rendering-collections-with-map-method-ç”¨-map-æ–¹æ³•æ¸²æŸ“é›†åˆ">Rendering collections with Map method ç”¨ Map æ–¹æ³•æ¸²æŸ“é›†åˆ</a></li>
            <li><a href="#key-attribute-keyå±æ€§">Key attribute Keyå±æ€§</a></li>
            <li><a href="#refactoring-modules-é‡æ„æ¨¡å—">Refactoring modules é‡æ„æ¨¡å—</a></li>
          </ul>
        </li>
        <li><a href="#è¡¨å•">è¡¨å•</a>
          <ul>
            <li><a href="#filtering-displayed-elements-è¿‡æ»¤æ˜¾ç¤ºçš„å…ƒç´ ">Filtering Displayed Elements è¿‡æ»¤æ˜¾ç¤ºçš„å…ƒç´ </a></li>
          </ul>
        </li>
        <li><a href="#ä»æœåŠ¡å™¨è·å–æ•°æ®">ä»æœåŠ¡å™¨è·å–æ•°æ®</a>
          <ul>
            <li><a href="#the-browser-as-a-runtime-environment">The browser as a runtime environment</a></li>
            <li><a href="#npm">npm</a></li>
            <li><a href="#axios-and-promises">Axios and promises</a></li>
            <li><a href="#effect-hooks">Effect-hooks</a></li>
            <li><a href="#the-development-runtime-environment">The development runtime environment</a></li>
          </ul>
        </li>
        <li><a href="#åœ¨æœåŠ¡ç«¯å°†æ•°æ®-alert-å‡ºæ¥">åœ¨æœåŠ¡ç«¯å°†æ•°æ® Alert å‡ºæ¥</a>
          <ul>
            <li><a href="#rest-è¡¨ç°å±‚çŠ¶æ€è½¬æ¢">REST è¡¨ç°å±‚çŠ¶æ€è½¬æ¢</a></li>
            <li><a href="#sending-data-to-the-server-å‘é€æ•°æ®åˆ°æœåŠ¡å™¨">Sending Data to the Server å‘é€æ•°æ®åˆ°æœåŠ¡å™¨</a></li>
            <li><a href="#changing-the-important-of-notes">Changing the important of Notes</a></li>
            <li><a href="#extracting-communication-with-the-backend-into-a-separate-module">Extracting communication with the backend into a separate module</a></li>
            <li><a href="#cleaner-syntax-for-defining-object-literals-ç”¨äºå®šä¹‰å¯¹è±¡å­—é¢é‡çš„æ›´æ¸…æ™°çš„è¯­æ³•">cleaner syntax for defining object literals ç”¨äºå®šä¹‰å¯¹è±¡å­—é¢é‡çš„æ›´æ¸…æ™°çš„è¯­æ³•</a></li>
            <li><a href="#promises-and-errors">Promises and errors</a></li>
          </ul>
        </li>
        <li><a href="#ç»™-react-åº”ç”¨åŠ ç‚¹æ ·å¼">ç»™ React åº”ç”¨åŠ ç‚¹æ ·å¼</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="ä»æ¸²æŸ“é›†åˆåˆ°æ¨¡å—å­¦ä¹ ">ä»æ¸²æŸ“é›†åˆåˆ°æ¨¡å—å­¦ä¹ </h3>
<p>ä½¿ç”¨ VS Code å¯ä»¥å®‰è£… React çš„ä»£ç ç‰‡æ®µ Snippetsï¼Œå®‰è£…åœ¨<a href="https://marketplace.visualstudio.com/items?itemName=xabikos.ReactSnippets" target="_blank" rel="noopener noreffer">è¿™é‡Œ</a>ã€‚</p>
<p>å–„ç”¨ console.log æ¥è¿›è¡Œè°ƒè¯•ï¼Œä½¿ç”¨ <code>console.log('props value is', props)</code>ï¼Œç”¨ <code>,</code> åˆ†éš”è€Œä¸æ˜¯ç”¨ <code>+</code> è¿æ¥ objectã€‚</p>
<p>åœ¨åº”ç”¨å´©æºƒä½¿ç”¨ console.log æ¥è°ƒè¯•æ—¶ï¼Œåº”è¯¥ä»æœ€å…ˆæ¸²æŸ“çš„ç»„ä»¶å¼€å§‹æ’å…¥ console.log æ¥æ’æŸ¥å‡ºé”™é—®é¢˜çš„ä½ç½®ï¼Œç„¶åç»“åˆ æ‰“å°æ•°ç»„ã€å¯¹è±¡ç­‰æ–¹å¼æ‰¾å‡ºå…·ä½“çš„é—®é¢˜å¹¶è§£å†³ï¼Œç›´åˆ°ç¨‹åºæ­£å¸¸è¿è¡Œä¸ºæ­¢ã€‚</p>
<h4 id="javascript-arrays-jsæ•°ç»„">JavaScript Arrays JSæ•°ç»„</h4>
<p>å­¦ä¹ è§†é¢‘ï¼Œå¾…æ•´ç†</p>
<h4 id="rendering-collections-with-map-method-ç”¨-map-æ–¹æ³•æ¸²æŸ“é›†åˆ">Rendering collections with Map method ç”¨ Map æ–¹æ³•æ¸²æŸ“é›†åˆ</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">notes</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;æˆ‘å–œæ¬¢ react&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">date</span><span class="o">:</span> <span class="s1">&#39;2020-10-29T15:17:10.098Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">important</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;å¯åŠ¨ç”µè„‘å¼€VSï¼Œæ¬¢è¿æ¥åˆ°ç¼–ç¨‹ä¸–ç•Œã€‚&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">date</span><span class="o">:</span> <span class="s1">&#39;2020-10-29T15:18:26.092Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">important</span><span class="o">:</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;GET å’Œ POST æ˜¯ HTTP åè®®ä¸­æœ€é‡è¦çš„æ–¹æ³•&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">important</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">notes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ç¬”è®°</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">notes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">notes</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">notes</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">App</span> <span class="na">notes</span><span class="o">=</span><span class="p">{</span><span class="nx">notes</span><span class="p">}</span> <span class="p">/&gt;,</span>
</span></span><span class="line"><span class="cl">  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Š notes æ•°ç»„ä»…æœ‰ä¸‰ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å¼•ç”¨ä¸€ä¸ª<em>ç¡¬ç¼–ç çš„ç´¢å¼•å·</em>æ¥è®¿é—®æ•°ç»„ä¸­å¯¹è±¡ã€‚</p>
<p>ä½¿ç”¨ <code>map</code> å‡½æ•°ä»æ•°ç»„å¯¹è±¡ç”Ÿæˆ React å…ƒç´ ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡è¿™æ ·çš„æ–¹æ³•å¯ä»¥ç”Ÿæˆ li å…ƒç´ çš„æ•°ç»„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">æˆ‘å–œæ¬¢</span> <span class="nx">react</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;,</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">å¯åŠ¨ç”µè„‘å¼€VS</span><span class="err">ï¼Œ</span><span class="nx">æ¬¢è¿æ¥åˆ°ç¼–ç¨‹ä¸–ç•Œ</span><span class="err">ã€‚</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;,</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">GET</span> <span class="nx">å’Œ</span> <span class="nx">POST</span> <span class="nx">æ˜¯</span> <span class="nx">HTTP</span> <span class="nx">åè®®ä¸­æœ€é‡è¦çš„æ–¹æ³•</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨é‡æ„ä¹‹å‰çš„ä»£ç ï¼Œå¦‚ä¸‹:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">notes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ç¬”è®°</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nx">note</span> <span class="p">=&gt;</span> <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>map</code> çš„å·¥ä½œæ–¹å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>     <span class="c1">// æ‰“å°å‡º [1,2,3]
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ <code>map</code> æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶å…ƒç´ æ˜¯ä»åŸå§‹æ•°ç»„é€šè¿‡ mapping æ˜ å°„åˆ›å»ºçš„ï¼Œæ˜ å°„çš„é€»è¾‘æ˜¯ä½¿ç”¨ä½œä¸º <code>map</code> æ–¹æ³•ä¼ é€’è¿›å»çš„å‡½æ•°ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°æ˜¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="c1">// ç´§å‡‘å½¢å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ä»¥ä¸Šå‡½æ•°çš„å®Œæ•´å½¢å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(</span><span class="nx">note</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥å‡½æ•°è·å–ä¸€ä¸ª note å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åç•ªä½å…¶ id å­—æ®µçš„å€¼ã€‚</p>
<h4 id="key-attribute-keyå±æ€§">Key attribute Keyå±æ€§</h4>
<p>æ­£å¦‚ React <a href="https://zh-hans.reactjs.org/docs/lists-and-keys.html" target="_blank" rel="noopener noreffer">åˆ—è¡¨ &amp; Key</a> çš„è¯´æ˜ï¼Œåˆ—è¡¨é¡¹ï¼Œ<em>å³ <code>map</code> æ–¹æ³•ç”Ÿæˆçš„æ¯ä¸ªå…ƒç´ </em>ï¼Œéƒ½å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„é”®å€¼ï¼Œåä¸º key çš„å±æ€§ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">notes</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ç¬”è®°</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶è¯´å¯ä»¥ä½¿ç”¨æ•°ç»„çš„ç´¢å¼•ä½œä¸ºé”®ï¼Œé¿å…æ§åˆ¶å°æŠ¥é”™ï¼Œ<strong>ä½†è¿™ä»ç„¶å¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚</strong>ï¼Œè¿™æœ‰<a href="https://medium.com/@robinpokorny/index-as-a-key-is-an-anti-pattern-e0349aece318" target="_blank" rel="noopener noreffer">é—®é¢˜æ¡ˆä¾‹</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="c1">// ä¸è¦è¿™æ ·åš
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">note</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="refactoring-modules-é‡æ„æ¨¡å—">Refactoring modules é‡æ„æ¨¡å—</h4>
<p>å°† App é‡æ„ï¼Œä½¿å¾— App æ›´ç®€æ´æ˜“ç”¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="c1">// æ–°å¢ Note ç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">Note</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">note</span> <span class="p">})</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">notes</span> <span class="p">})</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ç¬”è®°</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Note</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">note</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æ­¤å¤„è¦æ³¨æ„ï¼Œè¿™æ ·å¿…é¡»åœ¨ Note ç»„ä»¶å®šä¹‰ key å±æ€§ï¼Œè€Œä¸æ˜¯åœ¨ li æ ‡ç­¾å®šä¹‰ã€‚</strong></p>
<p>é€šå¸¸æ¥è¯´ï¼Œåœ¨è¾ƒå°å‹çš„åº”ç”¨ä¸­ï¼Œç»„ä»¶ä¸€èˆ¬æ”¾åœ¨ <code>src/components</code> ç›®å½•ä¸‹ï¼Œä¸€èˆ¬çº¦å®šæŒ‰ç…§ç»„ä»¶åç§°æ¥å‘½åæ–‡ä»¶ã€‚</p>
<p>ä¾‹å¦‚åˆ›å»ºä¸€ä¸ª Node ç»„ä»¶ï¼Œæˆ‘ä»¬å°† Node.js æ–‡ä»¶å­˜åœ¨ <code>components</code> ç›®å½•ä¸‹ï¼Œå…¶æ–‡ä»¶å†…å®¹ä¸º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Note</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">note</span> <span class="p">})</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Note</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åä¸€è¡Œ <code>export</code> æ˜¯åœ¨å£°æ˜æ¨¡å—ï¼Œå³å˜é‡ Noteã€‚</p>
<p>é‚£ä¹ˆåœ¨ä½¿ç”¨è¿™ä¸ªç»„ä»¶çš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ import æ–¹æ³•æ¥ä½¿ç”¨è¿™ä¸ªæ¨¡å—ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ReactDom</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Note</span> <span class="nx">from</span> <span class="s1">&#39;./components/Note&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">notes</span> <span class="p">})</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¼å…¥è‡ªå·±çš„ç»„ä»¶æ—¶ï¼Œå®ƒä»¬çš„ä½ç½®å¿…é¡»ç»™å‡ºå¯¼å…¥æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚ <code>'./components/Note'</code></p>
<p>å¼€å¤´çš„ <code>.</code> æ˜¯æŒ‡å½“å‰å·¥ä½œç›®å½•ï¼Œå› æ­¤å¼•å…¥æ–‡ä»¶çš„ä½ç½®æ˜¯å½“å‰ç›®å½•ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸­çš„ Node.js æ–‡ä»¶ï¼Œå…¶ä¸­ <code>.js</code> å¯ä»¥çœç•¥ã€‚</p>
<h3 id="è¡¨å•">è¡¨å•</h3>
<p>ä½¿ç”¨ <code>useState</code> æ–¹æ³•å°†æ–°å¢çš„ç¬”è®°æ·»åŠ åˆ° App ç»„ä»¶çŠ¶æ€ä¸­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">notes</span> <span class="p">})</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">notes</span><span class="p">,</span> <span class="nx">setNotes</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">notes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">newNote</span><span class="p">,</span> <span class="nx">setNewNote</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;a new note...&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">addNote</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span> <span class="c1">// é˜»æ­¢äº‹ä»¶çš„é»˜è®¤æ“ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">noteObject</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">id</span><span class="o">:</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">content</span><span class="o">:</span> <span class="nx">newNote</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">important</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">noteObject</span><span class="p">))</span> <span class="c1">// ä½¿ç”¨ concat æ–¹æ³•æ¥æ–°å»º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">setNewNote</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">handleNoteChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">setNewNote</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ç¬”è®°</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Note</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">note</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">addNote</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">newNote</span><span class="p">}</span> <span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleNoteChange</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span><span class="p">&gt;</span><span class="nx">save</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­æ³¨æ„ç‚¹ <code>&lt;input /&gt;</code> ç»„ä»¶ä¸­ï¼Œå¦‚æœåªæœ‰ <code>value={newNote}</code> å±æ€§å—æ§ï¼Œå°†ä¼šå¯¼è‡´ <code>input</code> ç»„ä»¶æ¸²æŸ“æˆä¸€ä¸ªåªè¯»å…ƒç´ ï¼Œè¿™å°†æ­£ç¡®çš„ä¿®æ”¹ <code>input</code> çš„valueï¼Œå¿…é¡»æ­é… <code>onChange={handleNoteChange}</code> æ‰èƒ½æ­£ç¡®æ§åˆ¶ <code>input</code> å…ƒç´ çš„çŠ¶æ€ã€‚ç›¸åçš„ï¼Œå¦‚æœåªæœ‰ <code>onChange={handleNoteChange}</code> è€Œæ²¡æœ‰ <code>value={newNote}</code>ï¼Œé‚£æ · <code>setNewNote('')</code> å°†ä¸ä¼šé‡ç½® <code>input</code> å…ƒç´ çš„å€¼ã€‚</p>
<h4 id="filtering-displayed-elements-è¿‡æ»¤æ˜¾ç¤ºçš„å…ƒç´ ">Filtering Displayed Elements è¿‡æ»¤æ˜¾ç¤ºçš„å…ƒç´ </h4>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>çŸ¥è¯†ç‚¹<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p><strong>ä¸‰ç›®è¿ç®—ç¬¦</strong> - <code>condition ? val1 : val2</code></p>
<p>å½“ <code>condition</code> ä¸º true æ—¶ï¼Œè¿”å› <code>val1</code>ï¼Œå¦åˆ™è¿”å› <code>val2</code></p>
<hr>
<p><strong>æ•°ç»„çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener noreffer">filter</a> æ–¹æ³•</strong> - <code>arr.filter()</code></p>
</div>
        </div>
    </div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span> 
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Note</span> <span class="nx">from</span> <span class="s1">&#39;./components/Note&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">notes</span><span class="p">,</span> <span class="nx">setNotes</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">notes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">newNote</span><span class="p">,</span> <span class="nx">setNewNote</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">showAll</span><span class="p">,</span> <span class="nx">setShowAll</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">notesToShow</span> <span class="o">=</span> <span class="nx">showAll</span>
</span></span><span class="line"><span class="cl">    <span class="o">?</span> <span class="nx">notes</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">important</span><span class="p">)</span> <span class="c1">// å› ä¸º note.important æœ¬èº«æ˜¯å¸ƒå°”å€¼ï¼Œæ‰€ä»¥çœç•¥äº† &#39;=== true&#39; çš„åˆ¤æ–­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Notes</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setShowAll</span><span class="p">(</span><span class="o">!</span><span class="nx">showAll</span><span class="p">)}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">show</span> <span class="p">{</span><span class="nx">showAll</span> <span class="o">?</span> <span class="s1">&#39;æ˜¾ç¤ºé‡è¦&#39;</span> <span class="o">:</span> <span class="s1">&#39;æ˜¾ç¤ºå…¨éƒ¨&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">notesToShow</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Note</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">note</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ...        
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸‰ç›®è¿ç®—ç¬¦åˆ¤æ–­ <code>showAll</code> çš„çŠ¶æ€æ¥è¿‡æ»¤éœ€è¦æ˜¾ç¤ºçš„æ•°æ®ä»¥åŠæŒ‰é’®çš„å€¼ã€‚</p>
<h3 id="ä»æœåŠ¡å™¨è·å–æ•°æ®">ä»æœåŠ¡å™¨è·å–æ•°æ®</h3>
<p>ä¸€èˆ¬çš„é¡¹ç›®åŒ…å«å‰ç«¯ã€Œå®¢æˆ·ç«¯ã€å’Œåç«¯ã€ŒæœåŠ¡ç«¯ã€ã€‚æˆªè‡³ç›®å‰ï¼Œç¨‹åºä»…æ¶‰åŠåˆ°å‰ç«¯çš„å¼€å‘ã€‚</p>
<p>æ¥ä¸‹æ¥ä½¿ç”¨ <a href="https://github.com/typicode/JSON-Server%20%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener noreffer">JSON æœåŠ¡å™¨</a> ä½œä¸ºåç«¯ã€‚</p>
<p>ä½¿ç”¨ <code>npm install -g json-server</code> æ‰§è¡Œå…¨å±€å®‰è£… <code>json-server</code>ï¼Œä¹Ÿå¯ä»¥åœ¨åº”ç”¨æ ¹ç›®å½•ä½¿ç”¨ <code>npx json-server --port 3001 --watch db.json</code> è¿è¡Œ <code>json-server</code> æœåŠ¡å™¨ã€‚</p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>db.json</code> ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;notes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;æˆ‘å–œæ¬¢ react&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;date&#34;</span><span class="p">:</span> <span class="s2">&#34;2020-10-29T15:17:10.098Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;important&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;å¯åŠ¨ç”µè„‘å¼€VSï¼Œæ¬¢è¿æ¥åˆ°ç¼–ç¨‹ä¸–ç•Œã€‚&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;date&#34;</span><span class="p">:</span> <span class="s2">&#34;2020-10-29T15:18:26.092Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;important&#34;</span><span class="p">:</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;GET å’Œ POST æ˜¯ HTTP åè®®ä¸­æœ€é‡è¦çš„æ–¹æ³•&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;date&#34;</span><span class="p">:</span> <span class="s2">&#34;2020-10-29T15:17:10.098Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;important&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºä»€ä¹ˆä½¿ç”¨ 3001 ç«¯å£ï¼Ÿæ˜¯å› ä¸ºå‰ç«¯ React ç¨‹åºå ç”¨äº† 3000 ç«¯å£ï¼Œæ‰€ä»¥å°† <code>json-server</code> è®¾å®šä¸º 3001 ç«¯å£ã€‚</p>
<p>å¯ä»¥é€šè¿‡ http://localhost:3001/notes æ¥è®¿é—® <code>db.json</code> çš„ <code>notes</code> æ•°æ®äº†ã€‚</p>
<p>é€‰ç”¨ <code>json-server</code> ä½œä¸ºåç«¯æœåŠ¡å™¨çš„åŸå› æ˜¯åœ¨å¼€å‘é˜¶æ®µå¯ä»¥å¾ˆå¿«é€Ÿçš„å®ç°åŠŸèƒ½ã€‚å®é™…é¡¹ç›®ä¸€èˆ¬ä¼šå°†æ•°æ®å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå¦‚ <code>MySQL</code> <code>MongoDB</code> ç­‰ã€‚</p>
<h4 id="the-browser-as-a-runtime-environment">The browser as a runtime environment</h4>
<p>XHRã€ŒXMLHttpRequestã€æ˜¯1999å¹´å¼•å…¥çš„æŠ€æœ¯ï¼Œä½¿ç”¨ XHR å¯¹è±¡å‘å‡º HTTP è¯·æ±‚ã€‚</p>
<p>ç°ä»£æµè§ˆå™¨åŸºæœ¬ä¸Šéƒ½æ”¯æŒäº† promises çš„ fetch æ–¹æ³•ï¼Œè€Œä¸æ˜¯ XHR ä½¿ç”¨çš„äº‹ä»¶é©±åŠ¨å‹ï¼Œæ‰€ä»¥ç°åœ¨ä¸€èˆ¬ä¹Ÿä¸ç”¨ XHR æ–¹æ³•ã€‚</p>
<p>ä½†è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ XHR æ–¹æ³•å¦‚ä½•è¯·æ±‚æ•°æ®çš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">xhttp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">xhttp</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">xhttp</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/data.json&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">xhttp</span><span class="p">.</span><span class="nx">send</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šå°†äº‹ä»¶å¤„ç†ç¨‹åºæ³¨å†Œåˆ° xhttp å¯¹è±¡ï¼Œå½“ xhttp çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ‰§è¡Œã€‚XHR è¯·æ±‚æ˜¯<strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼Œå¹¶éè‡ªä¸Šè€Œä¸‹çš„åŒæ­¥æ‰§è¡Œã€‚</p>
<p>JavaScript å¼•æ“ï¼Œæˆ–è€…è¿è¡Œç¯å¢ƒï¼Œéµå¾ª<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop" target="_blank" rel="noopener noreffer">å¼‚æ­¥æ¨¡å‹</a>ã€‚åŸåˆ™ä¸Šæ‰€æœ‰çš„ IO æ“ä½œã€Œé™¤äº†ä¸€äº›ç‰¹ä¾‹ã€éƒ½ä»¥éé˜»å¡æ–¹å¼æ‰§è¡Œã€‚è¿™æ„å‘³ç€ä»£ç æ‰§è¡Œåœ¨è°ƒç”¨ IO å‡½æ•°ä¹‹åç«‹å³ç»§ç»­ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å®ƒè¿”å›ã€‚</p>
<p>å¼‚æ­¥æ“ä½œå®Œæˆçš„æŸä¸ªæ—¶åˆ»ï¼ŒJavaScript å¼•æ“æ‰ä¼šè°ƒç”¨æ³¨å†Œåˆ°è¯¥æ“ä½œçš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<p>JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å®ƒå¹¶ä¸èƒ½å¹¶è¡Œæ‰§è¡Œä»£ç ï¼Œè‹¥æ²¡æœ‰ä½¿ç”¨éé˜»å¡æ–¹å¼ï¼Œæµè§ˆå™¨å°†ä¼šåœ¨æ‰§è¡Œä»£ç æ—¶å¡ä½ï¼Œç›´åˆ°ä»£ç æ‰§è¡Œç»“æŸæ‰æ¢å¤å“åº”ã€‚</p>
<p>ä¸ºäº†ä¿è¯æµè§ˆå™¨çš„ responsiveï¼Œä»£ç é€»è¾‘è¦è®©ä»»ä½•ä¸€ä¸ªå•ä¸€è®¡ç®—ä¸èŠ±è´¹å¤ªå¤šæ—¶é—´ã€‚</p>
<p>ç°ä»£æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers" target="_blank" rel="noopener noreffer">Web Worker</a> æ¥è¿è¡Œå¹¶è¡ŒåŒ–ä»£ç ã€‚ä½†æ³¨æ„çš„æ˜¯å•ä¸ªæµè§ˆå™¨çª—å£ä»ç„¶æ˜¯ç”±ä¸€ä¸ªå•çº¿ç¨‹å¤„ç†ã€‚</p>
<h4 id="npm">npm</h4>
<p>ç›®å‰å‡ ä¹æ‰€æœ‰ JavaScript é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨ node åŒ…ç®¡ç†å™¨å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯ npmã€‚ä½¿ç”¨ npm ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>package.json</code> æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;notes&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;private&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@testing-library/jest-dom&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.2.4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@testing-library/react&#34;</span><span class="p">:</span> <span class="s2">&#34;^9.4.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@testing-library/user-event&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.2.1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react&#34;</span><span class="p">:</span> <span class="s2">&#34;^16.12.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react-dom&#34;</span><span class="p">:</span> <span class="s2">&#34;^16.12.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react-scripts&#34;</span><span class="p">:</span> <span class="s2">&#34;3.3.0&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts start&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts build&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts test&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;eject&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts eject&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;eslintConfig&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extends&#34;</span><span class="p">:</span> <span class="s2">&#34;react-app&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;browserslist&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;production&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;&gt;0.2%&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;not dead&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;not op_mini all&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;development&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;last 1 chrome version&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;last 1 firefox version&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;last 1 safari version&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>dependencies å®šä¹‰äº†è¯¥é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–æˆ–å¤–éƒ¨åº“ã€‚</p>
<p>å®‰è£…ä¾èµ–ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä½¿ç”¨ç»ˆç«¯ <code>npm install axios</code> å‘½ä»¤å³å¯ã€‚</p>
<p>å½“æ‰§è¡Œå®Œæˆåï¼Œä¼šåœ¨ <code>package.json</code> çš„ dependencies ä¸­æ·»åŠ  axiosã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ <code>package.json</code> å¢åŠ è¿™ä¸€æ¡ï¼Œç„¶ååœ¨æ ¹ç›®å½•é€šè¿‡æ‰§è¡Œ <code>npm install</code> æ¥<strong>å®‰è£…æ‰€æœ‰ä¾èµ–</strong>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">}</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;dependencies&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;axios&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.19.2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react&#34;</span><span class="p">:</span> <span class="s2">&#34;^16.12.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react-dom&#34;</span><span class="p">:</span> <span class="s2">&#34;^16.12.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react-scripts&#34;</span><span class="p">:</span> <span class="s2">&#34;3.3.0&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä½•å®‰è£…å¼€å‘ä¾èµ–ï¼Ÿå¼€å‘ä¾èµ–æ˜¯åœ¨å¼€å‘ä¸­æä¾›å¸®åŠ©ï¼Œå®é™…é¡¹ç›®å¹¶ä¸éœ€è¦å®ƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install json-server --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šå®‰è£…äº† JSON æœåŠ¡å™¨ï¼Œåœ¨ <code>package.json</code> ä¸­å¢åŠ  <code>server</code> script æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¯åŠ¨ JSON æœåŠ¡å™¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts start&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts build&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts test&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;eject&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts eject&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;server&#34;</span><span class="p">:</span> <span class="s2">&#34;json-server -p3001 --watch db.json&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·å¯ä»¥é€šè¿‡ <code>npm run server</code> æ¥å¯åŠ¨ JSON æœåŠ¡å™¨äº†ã€‚</p>
<h4 id="axios-and-promises">Axios and promises</h4>
<p>axios åº“æ˜¯ä»£æ›¿æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼ŒåŠŸèƒ½ç±»ä¼¼äº fetchã€‚åœ¨ä¸Šä¸€èŠ‚ä½¿ç”¨ npm å®‰è£…äº† axios åº“ï¼Œåœ¨é¡¹ç›®ä¸­åƒå¼•å…¥ react åº“ä¸€æ · <code>import</code> å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/notes&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">promise</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">promise2</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/foobar&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">promise2</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±äº JSON æœåŠ¡å™¨ä¸­ä»…æœ‰ notes æ•°æ®ï¼Œæ‰€ä»¥è®¿é—® http://localhost:3000 æ§åˆ¶å°ä¼šæœ‰æŠ¥é”™ï¼Œå¦‚ä¸‹ï¼š</p>
<figure><img src="https://fullstackopen.com/static/823a2e7f414c99cb849a42470e4f372d/5a190/16b.png"/>
</figure>

<p>Axios çš„ <code>get</code> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises" target="_blank" rel="noopener noreffer">promise</a>ã€‚</p>
<p>Mozilla&rsquo;s ç½‘ç«™ä¸Šçš„æ–‡æ¡£å¯¹ promises çš„è§£é‡Šï¼š</p>
<blockquote>
<p>A Promise is an object representing the eventual completion or failure of an asynchronous operation.</p>
<p>Promiseæ‰¿è¯ºæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–å¤±è´¥ã€‚</p>
</blockquote>
<p>promise æ˜¯ä¸€ä¸ªè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„å¯¹è±¡ï¼Œæœ‰ä¸‰ç§ä¸åŒçŠ¶æ€</p>
<ul>
<li>The promise is <em><code>pending</code></em></li>
<li>The promise is <em><code>fulfilled</code></em></li>
<li>The promise is <em><code>rejected</code></em></li>
</ul>
<p>pending è¡¨ç¤ºè¿˜åœ¨æäº¤ä¸­ï¼Œæœ€ç»ˆå€¼å¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚</p>
<p>fulfilled è¡¨ç¤ºæ•°æ®å·²å…‘ç°ï¼Œæ“ä½œæˆåŠŸï¼Œæœ€ç»ˆå€¼å¯ç”¨ã€‚è¿™ç§çŠ¶æ€æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º <code>resolve</code>ã€‚</p>
<p>rejected è¡¨ç¤ºæ‹’ç»ï¼Œæ“ä½œå¤±è´¥ï¼Œè¯´æ˜å‡ºç°äº†é”™è¯¯é˜»æ­¢æœ€ç»ˆå€¼ã€‚</p>
<p>å›åˆ°ä¸Šé¢çš„ç¤ºä¾‹ï¼Œåœ¨ä¸€ä¸ªè¯·æ±‚çš„ <code>PromiseStatus</code> æ˜¯ <code>resolved</code> ä¹Ÿå°±æ˜¯ fulfilled çŠ¶æ€ï¼Œè¡¨ç¤ºæ˜¯æˆåŠŸçš„ã€‚è€Œç¬¬äºŒä¸ªæ˜¯ rejectedï¼Œæ§åˆ¶å°æç¤ºé”™è¯¯åŸå› ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬HTTP GET è¯·æ±‚çš„åœ°å€æ˜¯ä¸å­˜åœ¨çš„ã€Œ404é”™è¯¯ã€ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦è®¿é—® promise è¡¨ç¤ºçš„æ“ä½œç»“æœï¼Œå¿…é¡»è¦å‘ promise æ³¨å†Œä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚è¿™é‡Œæ˜¯ä½¿ç”¨ <code>then</code> æ–¹æ³•å®ç°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/notes&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">notes</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>JavaScript è¿è¡Œæ—¶ç¯å¢ƒè°ƒç”¨ç”± <code>then</code> æ–¹æ³•æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶æä¾›ä¸€ä¸ª <code>response</code> å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚<code>response</code> å¯¹è±¡åŒ…å«ä¸ HTTP GET è¯·æ±‚å“åº”ç›¸å…³çš„æ‰€æœ‰åŸºæœ¬æ•°æ®ï¼Œä¹ŸåŒ…æ‹¬è¿”å›çš„ dataã€status code å’Œ headersã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å¿…è¦å°† promise å¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œè€Œä¸”å°† <code>then</code> é“¾æ¥åˆ° axios æ–¹æ³•ä¸­ä¹Ÿæ˜¯å¾ˆå¸¸ç”¨çš„ã€‚æ‰€ä»¥é‡æ„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">axios</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/notes&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">notes</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ˜¯çº¯æ–‡æœ¬ï¼ŒåŸºæœ¬ä¸Šåªæœ‰ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ã€‚ Axios åº“ä»ç„¶èƒ½å¤Ÿå°†æ•°æ®è§£æä¸ºä¸€ä¸ª JavaScript æ•°ç»„ï¼Œå› ä¸ºæœåŠ¡å™¨ä½¿ç”¨ <code>content-type</code> å¤´æŒ‡å®šæ•°æ®æ ¼å¼ä¸º <code>application/json; charset=utf-8</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/notes&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">notes</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">App</span> <span class="na">notes</span><span class="o">=</span><span class="p">{</span><span class="nx">notes</span><span class="p">}</span> <span class="p">/&gt;,</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šæ–¹æ³•å‘æœ¬åœ°æœåŠ¡å™¨è¯·æ±‚æ•°æ®å¹¶æ¸²æŸ“ï¼Œè™½ç„¶ä¹Ÿèƒ½å¤Ÿæ‰§è¡Œï¼Œä½†å®ƒåªæœ‰åœ¨å°†æ•´ä¸ª App ç»„ä»¶æ¸²æŸ“å®Œæˆåæ‰ä¼šå¾—åˆ°æˆåŠŸçš„ responseã€‚è€Œä¸” <code>axios.get</code> å‘½ä»¤åº”è¯¥æ”¾åœ¨ç»„ä»¶ä¸­çš„å“ªä¸ªä½ç½®ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚</p>
<p>è¿™æ ·çš„æ–¹æ³•ä¸æ˜¯å¾ˆå¥½ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ã€‚</p>
<p>ç»“åˆ Effect hooks å¯ä»¥å¾ˆå¥½çš„å¤„ç†ã€‚</p>
<h4 id="effect-hooks">Effect-hooks</h4>
<p>16.8.0ç‰ˆæœ¬è¿˜å¼•å…¥äº† effect hooks æ–°ç‰¹æ€§ã€‚ åƒæ–‡æ¡£é‡Œè¯´çš„:</p>
<blockquote>
<p>The Effect Hook lets you perform side effects in function components. Data fetching, setting up a subscription, and manually changing the DOM in React components are all examples of side effects.</p>
<p>Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨ã€‚æ•°æ®è·å–ã€è®¾ç½®è®¢é˜…å’Œæ‰‹åŠ¨æ›´æ”¹ React ç»„ä»¶ä¸­çš„ DOM éƒ½æ˜¯å‰¯ä½œç”¨çš„ä¾‹å­ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œeffect hooksæ­£æ˜¯ä»æœåŠ¡å™¨è·å–æ•°æ®æ—¶ä½¿ç”¨çš„æ­£ç¡®å·¥å…·ã€‚</p>
<p>æ›´æ”¹åŸå…ˆçš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Note</span> <span class="nx">from</span> <span class="s1">&#39;./components/Note&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">notes</span><span class="p">,</span> <span class="nx">setNotes</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([])</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">newNote</span><span class="p">,</span> <span class="nx">setNewNote</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">showAll</span><span class="p">,</span> <span class="nx">setShowAll</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;effect&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">axios</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/notes&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;promise å…‘ç°&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setNotes</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="s1">&#39;ç¬”è®°&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œæ§åˆ¶å°ä¼šä¾æ¬¡æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">render</span> <span class="mi">0</span> <span class="nx">ç¬”è®°</span>
</span></span><span class="line"><span class="cl"><span class="nx">effect</span>
</span></span><span class="line"><span class="cl"><span class="nx">promise</span> <span class="nx">fulfilled</span>
</span></span><span class="line"><span class="cl"><span class="nx">render</span> <span class="mi">3</span> <span class="nx">ç¬”è®°</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>useEffect</code> å‡½æ•°ä¸€å…±æœ‰2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å‡½æ•°æœ¬èº«ï¼Œæ ¹æ®æ–‡æ¡£æè¿°ï¼š</p>
<blockquote>
<p>By default, effects run after every completed render, but you can choose to fire it only when certain values have changed.</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œeffects åœ¨æ¯æ¬¡æ¸²æŸ“å®Œæˆåè¿è¡Œï¼Œä½†æ˜¯ä½ å¯ä»¥é€‰æ‹©åªåœ¨æŸäº›å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰è°ƒç”¨ã€‚</p>
</blockquote>
<p>ç¬¬äºŒä¸ªæ˜¯æŒ‡å®š<a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect" target="_blank" rel="noopener noreffer">effectè¿è¡Œçš„é¢‘ç‡</a>ã€‚<code>[]</code> ç©ºæ•°ç»„è¡¨ç¤ºåªåœ¨ç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶è¿è¡Œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">useEffect</span><span class="p">(</span><span class="kd">function</span><span class="p">,</span> <span class="p">[])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="the-development-runtime-environment">The development runtime environment</h4>
<p>ç›®å‰ä¸ºæ­¢é¡¹ç›®çš„è¿è¡Œç¯å¢ƒæƒ…å†µå¦‚ä¸‹å›¾ï¼š</p>
<figure><img src="https://fullstackopen.com/static/650087bbee40291069025432f1408a29/d4713/18e.png"/>
</figure>

<h3 id="åœ¨æœåŠ¡ç«¯å°†æ•°æ®-alert-å‡ºæ¥">åœ¨æœåŠ¡ç«¯å°†æ•°æ® Alert å‡ºæ¥</h3>
<h4 id="rest-è¡¨ç°å±‚çŠ¶æ€è½¬æ¢">REST è¡¨ç°å±‚çŠ¶æ€è½¬æ¢</h4>
<p><a href="https://zh.wikipedia.org/wiki/%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2" target="_blank" rel="noopener noreffer">REST(Representational state transfer)</a>ï¼Œä¸æ˜¯ä¸€ç§æ ‡å‡†ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡é£æ ¼ã€‚RESTé€šå¸¸åŸºäºHTTPã€URIã€XMLä»¥åŠHTMLè¿™äº›ç°æœ‰çš„å¹¿æ³›æµè¡Œçš„åè®®å’Œæ ‡å‡†ã€‚</p>
<p>åœ¨ REST æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å°†å•ä¸ªæ•°æ®å¯¹è±¡(å¦‚åº”ç”¨ä¸­çš„ä¾¿ç¬º)ç§°ä¸º resourcesã€‚ æ¯ä¸ªèµ„æºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€â€”â€”å®ƒçš„ URLã€‚ æ ¹æ® json-server ä½¿ç”¨çš„ä¸€èˆ¬çº¦å®šï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿåœ¨èµ„æº URLï¼Œ å³ <code>notes/3</code> ä¸Šå®šä½æŸä¸ªä¾¿ç¬ºï¼Œå…¶ä¸­3æ˜¯èµ„æºçš„ idã€‚ å¦ä¸€æ–¹é¢ï¼Œ <code>notes</code> url æŒ‡å‘åŒ…å«æ‰€æœ‰ä¾¿ç¬ºçš„èµ„æºé›†åˆã€‚</p>
<p>é€šè¿‡ HTTP GET è¯·æ±‚ä»æœåŠ¡å™¨è·å–èµ„æºã€‚ ä¾‹å¦‚ï¼Œå¯¹ URL <code>notes/3</code> çš„ HTTP GET è¯·æ±‚å°†è¿”å› id ä¸º3çš„ä¾¿ç¬ºã€‚ å¯¹ <code>notes</code> URL çš„ HTTP GET è¯·æ±‚å°†è¿”å›æ‰€æœ‰ä¾¿ç¬ºçš„åˆ—è¡¨ã€‚</p>
<p>æ ¹æ® json æœåŠ¡å™¨éµå®ˆçš„ REST çº¦å®šï¼Œé€šè¿‡å‘ <code>notes</code> URL å‘å‡º HTTP POST è¯·æ±‚æ¥åˆ›å»ºã€å­˜å‚¨æ–°çš„ä¾¿ç¬ºã€‚ æ–°ä¾¿ç¬ºèµ„æºçš„æ•°æ®åœ¨è¯·æ±‚çš„ <code>body</code> ä¸­å‘é€ã€‚</p>
<p>Json-server è¦æ±‚ä»¥ JSON æ ¼å¼å‘é€æ‰€æœ‰æ•°æ®ã€‚ å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€æ•°æ®å¿…é¡»æ˜¯æ ¼å¼æ­£ç¡®çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¯·æ±‚å¿…é¡»åŒ…å«å€¼ä¸º application/json çš„ Content-Type è¯·æ±‚å¤´ã€‚</p>
<h4 id="sending-data-to-the-server-å‘é€æ•°æ®åˆ°æœåŠ¡å™¨">Sending Data to the Server å‘é€æ•°æ®åˆ°æœåŠ¡å™¨</h4>
<p>ä½¿ç”¨ <code>POST</code> æ–¹æ³•å°†å¯¹è±¡å‘é€è‡³æœåŠ¡å™¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¸éœ€è¦å‘é€ <code>id</code> å±æ€§ï¼Œå› ä¸º <code>id</code> äº¤ç»™æœåŠ¡å™¨ç”Ÿæˆæ›´åŠ åˆç†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">addNote</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">newObject</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">content</span><span class="o">:</span> <span class="nx">newNote</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">important</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">axios</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/notes&#39;</span><span class="p">,</span> <span class="nx">newObject</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setNewNote</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ <code>POST</code> è¯·æ±‚ä¸­å‘é€çš„æ•°æ®æ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡ï¼Œaxios è‡ªåŠ¨æ‡‚å¾—ä¸º <code>Content-Type</code> å¤´è®¾ç½®é€‚å½“çš„ <code>application/json</code> å€¼ã€‚</p>
<p>é€šè¿‡ Chrome å¼€å‘å·¥å…·çš„ Network é€‰é¡¹å¡æ£€æŸ¥ HTTP è¯·æ±‚æ¥æŸ¥çœ‹æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<p><a href="http://postman.com/" target="_blank" rel="noopener noreffer">Postman</a> å·¥å…·ç”¨æ¥è°ƒè¯•æœåŠ¡å™¨åº”ç”¨éå¸¸æ˜“ç”¨ï¼ŒChrome æ‰©å±•å®˜æ–¹å·²å¼ƒç”¨ï¼ˆDEPRECATEDï¼‰ï¼Œä½¿ç”¨ App åŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚</p>
<h4 id="changing-the-important-of-notes">Changing the important of Notes</h4>
<p>å‘ Note ç»„ä»¶æ·»åŠ ç”¨äºè°ƒæ•´ Notes çš„ important å€¼çš„æŒ‰é’®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Note</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">note</span><span class="p">,</span> <span class="nx">toggleImportance</span> <span class="p">})</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">label</span> <span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">important</span> <span class="o">?</span> <span class="s1">&#39;è®¾ç½®ä¸ºä¸é‡è¦&#39;</span> <span class="o">:</span> <span class="s1">&#39;è®¾ç½®ä¸ºé‡è¦&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">toggleImportance</span><span class="p">}&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ App ç»„ä»¶å¢åŠ äº‹ä»¶å¤„ç†ç¨‹åº <code>toggleImportance</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">notes</span><span class="p">,</span> <span class="nx">setNote</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([])</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">newNote</span><span class="p">,</span> <span class="nx">setNewNote</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">showAll</span><span class="p">,</span> <span class="nx">setShowAll</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">toggleImportance</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="sb">`http://localhost:3001/notes/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">note</span> <span class="o">=</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">changeNote</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">note</span><span class="p">,</span> <span class="nx">important</span><span class="o">:</span> <span class="o">!</span><span class="nx">note</span><span class="p">.</span><span class="nx">important</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">axios</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">changeNote</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span> <span class="o">?</span> <span class="nx">note</span> <span class="o">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ç¬”è®°</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setShowAll</span><span class="p">(</span><span class="o">!</span><span class="nx">showAll</span><span class="p">)}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">show</span> <span class="p">{</span><span class="nx">showAll</span> <span class="o">?</span> <span class="s1">&#39;æ˜¾ç¤ºé‡è¦&#39;</span> <span class="o">:</span> <span class="s1">&#39;æ˜¾ç¤ºå…¨éƒ¨&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">noteToShow</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">note</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Note</span>
</span></span><span class="line"><span class="cl">            <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="na">note</span><span class="o">=</span><span class="p">{</span><span class="nx">note</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="na">toggleImportance</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">toggleImportance</span><span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">          <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ <code>PUT</code> æ–¹æ³•æŠŠå¯¹åº” <code>id</code> çš„ <code>note</code> ä¿®æ”¹ï¼Œä¿®æ”¹æˆé‡è¦æˆ–æ˜¯ä¸é‡è¦ã€‚å¹¶é€šè¿‡å›è°ƒå‡½æ•°å°†ç»„ä»¶å†…çš„ <code>Notes</code> çŠ¶æ€æ›´æ–°ã€‚</p>
<h4 id="extracting-communication-with-the-backend-into-a-separate-module">Extracting communication with the backend into a separate module</h4>
<p>å°†ä¸åç«¯é€šä¿¡æå–åˆ°å•ç‹¬çš„æ¨¡å—ä¸­å»ï¼Œå¸¸ç”¨çš„å­˜æ”¾ç›®å½•æ˜¯ <code>src/services</code>ã€‚</p>
<p>åœ¨ <code>services</code> ç›®å½•ä¸‹åˆ›å»º <code>note.js</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3001/notes&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">getAll</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">baseUrl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">create</span> <span class="o">=</span> <span class="p">(</span><span class="nx">newObject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">baseUrl</span><span class="p">,</span> <span class="nx">newObject</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">update</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">newObject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">baseUrl</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="nx">newObject</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">getAll</span><span class="o">:</span> <span class="nx">getAll</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">create</span><span class="o">:</span> <span class="nx">create</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">update</span><span class="o">:</span> <span class="nx">update</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹ App.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">noteService</span> <span class="nx">from</span> <span class="s1">&#39;./services/notes&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">noteService</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">getAll</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setNotes</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">toggleImportance</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">note</span> <span class="o">=</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">changeNote</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">note</span><span class="p">,</span> <span class="nx">important</span><span class="o">:</span> <span class="o">!</span><span class="nx">note</span><span class="p">.</span><span class="nx">important</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">noteService</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">changeNote</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span> <span class="o">?</span> <span class="nx">note</span> <span class="o">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">addNote</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">noteObject</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">content</span><span class="o">:</span> <span class="nx">newNote</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">important</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">noteService</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">noteObject</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setNewNote</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ•´ä¸ª App <strong>åªä½¿ç”¨</strong> <code>response</code> å¯¹è±¡çš„ <code>response.data</code> å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä¼šæ›´å¥½ä¸€äº›ã€‚</p>
<p><code>services/note.js</code> åšå¦‚ä¸‹ä¿®æ”¹ï¼›</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">getAll</span><span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">baseUrl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">request</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å…¶ä½™æ–¹æ³•ä»¥æ­¤ç±»æ¨
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç›¸åº”çš„ App ç»„ä»¶é‡Œå¯¹åº”çš„ service ä¹Ÿè¦åšä¿®æ”¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">noteService</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">getAll</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">initialNotes</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setNotes</span><span class="p">(</span><span class="nx">initialNotes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>getAll</code> å‡½æ•°è¿”å›äº†ä¸€ä¸ª Promiseï¼Œ å½“ HTTP è¯·æ±‚æˆåŠŸæ—¶ï¼ŒPromise å°†è¿”å›ä»åç«¯å“åº”ä¸­å‘é€å›æ¥çš„æ•°æ®ã€‚</p>
<blockquote>
<p>æ‰¿è¯ºPromiseæ˜¯ç°ä»£ JavaScript å¼€å‘çš„æ ¸å¿ƒï¼Œéœ€è¦æŠ•å…¥ä¸€å®šæ—¶é—´ç†è§£å®ƒä»¬ã€‚
<a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/async%20%26%20performance/ch3.md" target="_blank" rel="noopener noreffer">You do not know JS - Chapter 3 Promises</a>
<a href="https://javascript.info/promise-chaining" target="_blank" rel="noopener noreffer">Promise chaining</a></p>
</blockquote>
<h4 id="cleaner-syntax-for-defining-object-literals-ç”¨äºå®šä¹‰å¯¹è±¡å­—é¢é‡çš„æ›´æ¸…æ™°çš„è¯­æ³•">cleaner syntax for defining object literals ç”¨äºå®šä¹‰å¯¹è±¡å­—é¢é‡çš„æ›´æ¸…æ™°çš„è¯­æ³•</h4>
<p>ä¸Šç« èŠ‚ä¸­ï¼Œ<code>service/note.js</code> æœ€å <code>export</code> äº†ä¸‰ä¸ªå¯¹è±¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">getAll</span><span class="o">:</span> <span class="nx">getAll</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">create</span><span class="o">:</span> <span class="nx">create</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">update</span><span class="o">:</span> <span class="nx">update</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å¯¹è±¡å®šä¹‰ä¸­ï¼Œå†’å·å·¦ä¾§çš„æ ‡ç­¾æ˜¯å¯¹è±¡çš„é”®ï¼Œè€Œå®ƒå³ä¾§çš„æ ‡ç­¾æ˜¯åœ¨æ¨¡å—å†…éƒ¨å®šä¹‰çš„ variablesã€‚</p>
<p>ç”±äºé”®å’Œèµ‹å€¼å˜é‡æ˜¯ç›¸åŒçš„ï¼ŒåŒæ—¶ä¹Ÿå›  ES6 å¼•å…¥åˆ° JavaScript ä¸­ï¼Œå¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span> <span class="nx">getAll</span><span class="p">,</span> <span class="nx">create</span><span class="p">,</span> <span class="nx">update</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="promises-and-errors">Promises and errors</h4>
<p>ä½¿ç”¨ <code>catch</code> æ–¹æ³•æ¥å¤„ç† Promise æ˜¯ reject çš„çŠ¶æ€çš„æƒ…å†µã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">axios</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3001/foobar&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;è¯·æ±‚æˆåŠŸ&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;è¯·æ±‚å¤±è´¥&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šå¸¸ <code>catch</code> æ–¹æ³•ç½®äº <a href="https://javascript.info/promise-chaining" target="_blank" rel="noopener noreffer">Promise é“¾</a>çš„æ›´æ·±å¤„æ¥ä½¿ç”¨ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">axios</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">baseUrl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">changeNote</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">cartch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;è¯·æ±‚å¤±è´¥&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹åŸå…ˆ App ç»„ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">toggleImportanceOf</span> <span class="o">=</span> <span class="nx">id</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">note</span> <span class="o">=</span> <span class="nx">notes</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">changedNote</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">note</span><span class="p">,</span> <span class="nx">important</span><span class="o">:</span> <span class="o">!</span><span class="nx">note</span><span class="p">.</span><span class="nx">important</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">noteService</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">changedNote</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">returnedNote</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">note</span> <span class="p">=&gt;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span> <span class="o">?</span> <span class="nx">note</span> <span class="o">:</span> <span class="nx">returnedNote</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">alert</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="sb">`æœªæ‰¾åˆ°è¯¥æ¡ &#39;</span><span class="si">${</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="si">}</span><span class="sb">&#39; ç¬”è®°ï¼Œå¯èƒ½å·²ä»æœåŠ¡å™¨åˆ é™¤ã€‚`</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setNotes</span><span class="p">(</span><span class="nx">notes</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç»™-react-åº”ç”¨åŠ ç‚¹æ ·å¼">ç»™ React åº”ç”¨åŠ ç‚¹æ ·å¼</h3>
<ul>
<li>å¯¼å…¥å¤–éƒ¨ css æ–‡ä»¶</li>
<li>å†…è”æ ·å¼</li>
</ul>
<p>å¯¼å…¥å¤–éƒ¨ css æ–‡ä»¶çš„æ–¹å¼ï¼Œåœ¨ <code>index.js</code> ä½¿ç”¨ <code>import</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;./index.css&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹ååœ¨ <code>index.css</code> æ·»åŠ ç›¸å…³æ ·å¼å³å¯ã€‚å¸¸è§„ html æ–‡ä»¶åœ¨å…ƒç´ ä¸­ä½¿ç”¨ <code>class</code> å±æ€§æ¥å¯¹åº”æ ·å¼è¡¨çš„ç±»é€‰æ‹©å™¨ï¼Œè€Œ react ä¸­éœ€è¦ä½¿ç”¨ <code>className</code> æ¥å¯¹åº”ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Note</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">note</span><span class="p">,</span> <span class="nx">toggleImportance</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">label</span> <span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">important</span> 
</span></span><span class="line"><span class="cl">    <span class="o">?</span> <span class="s1">&#39;è®¾ç½®ä¸ºä¸é‡è¦&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="s1">&#39;è®¾ç½®ä¸ºé‡è¦&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">className</span><span class="o">=</span><span class="s">&#39;note&#39;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">note</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">toggleImportance</span><span class="p">}&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†…è”æ ·å¼çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†…è”æ ·å¼ä¸­<strong>æ— æ³•ä½¿ç”¨</strong> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes" target="_blank" rel="noopener noreffer">ä¼ªç±» pseudo-classes</a>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Footer</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">footerStyle</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fontStyle</span><span class="o">:</span> <span class="s1">&#39;italic&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fontSize</span><span class="o">:</span> <span class="mi">16</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="p">{</span><span class="nx">footerStyle</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span><span class="nx">footer</span> <span class="nx">content</span><span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å†…è”æ ·å¼å’Œå…¶ä»–ä¸€äº›å°†æ ·å¼æ·»åŠ åˆ° React ç»„ä»¶çš„æ–¹æ³•å®Œå…¨è¿èƒŒäº†æ—§çš„æƒ¯ä¾‹ã€‚ ä¼ ç»Ÿä¸Šï¼Œå°† CSS ä¸å†…å®¹(HTML)å’ŒåŠŸèƒ½(JavaScript)è§£è€¦è¢«è®¤ä¸ºæ˜¯æœ€ä½³å®è·µã€‚ æ ¹æ®è¿™ä¸ªå¤è€çš„æ€æƒ³æµæ´¾ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°† CSSã€ HTML å’Œ JavaScript ç¼–å†™åˆ°å®ƒä»¬å„è‡ªçš„æ–‡ä»¶ä¸­ã€‚</p>
<p>Reactçš„å“²å­¦ï¼Œäº‹å®ä¸Šï¼Œæ˜¯è¿™ä¸ªæç«¯çš„å¯¹ç«‹é¢ã€‚ ç”±äºå°† CSSã€ HTML å’Œ JavaScript åˆ†ç¦»æˆå•ç‹¬çš„æ–‡ä»¶åœ¨å¤§å‹åº”ç”¨ä¸­ä¼¼ä¹ä¸åˆ©äºä¼¸ç¼©ï¼Œæ‰€ä»¥ React å°†åº”ç”¨æŒ‰ç…§å…¶é€»è¾‘åŠŸèƒ½å®ä½“è¿›è¡Œåˆ’åˆ†ã€‚</p>
<p>æ„æˆåº”ç”¨åŠŸèƒ½å®ä½“çš„ç»“æ„å•å…ƒæ˜¯ React ç»„ä»¶ã€‚ React ç»„ä»¶å®šä¹‰äº†ç»„ç»‡å†…å®¹çš„ HTMLï¼Œç¡®å®šåŠŸèƒ½çš„ JavaScript å‡½æ•°ï¼Œä»¥åŠç»„ä»¶çš„æ ·å¼; æ‰€æœ‰è¿™äº›éƒ½æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ è¿™æ˜¯ä¸ºäº†åˆ›å»ºå°½å¯èƒ½ç‹¬ç«‹å’Œå¯é‡ç”¨çš„å•ä¸ªç»„ä»¶ã€‚</p>
</blockquote></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2020-11-10</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://x.awo.design/2020/11/fullstackopen-server/" data-title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡" data-hashtags="React,JavaScript"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://x.awo.design/2020/11/fullstackopen-server/" data-hashtag="React"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://x.awo.design/2020/11/fullstackopen-server/" data-title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://x.awo.design/2020/11/fullstackopen-server/" data-title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://x.awo.design/2020/11/fullstackopen-server/" data-title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://x.awo.design/2020/11/fullstackopen-server/" data-title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 02 - ä¸æœåŠ¡å™¨é€šä¿¡"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/react/">React</a>,&nbsp;<a href="/tags/javascript/">JavaScript</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2020/10/fullstackopen-javascript-and-react/" class="prev" rel="prev" title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 01 - JavaScript å’Œ React"><i class="fas fa-angle-left fa-fw"></i>å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 01 - JavaScript å’Œ React</a>
            <a href="/2020/12/fullstackopen-nodejs-express/" class="next" rel="next" title="å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 03 - ç”¨ NodeJS å’Œ Express å†™æœåŠ¡ç«¯ç¨‹åº">å…¨æ ˆå…¬å¼€è¯¾2020å­¦ä¹ ç¬”è®° 03 - ç”¨ NodeJS å’Œ Express å†™æœåŠ¡ç«¯ç¨‹åº<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.111.3">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2017 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://awo.design" target="_blank">imagicw</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.4710034e669c7ff17f823f9ba12cf8a36582d65b007f79cbc4a3c11d7db2e4ca.css" integrity="sha256-RxADTmacf/F/gj&#43;boSz4o2WC1lsAf3nLxKPBHX2y5Mo="><link rel="stylesheet" href="/lib/katex/copy-tex.min.bf9ff4137fec38f6255419e142d0883c9c52090885d746f80eee12b273d9b3e0.css" integrity="sha256-v5/0E3/sOPYlVBnhQtCIPJxSCQiF10b4Du4SsnPZs&#43;A="><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.cd0d0b6e50ff01ff2f3a9a70d7cfb66a7c6cb9acf7a566325568be6d3bd31fc4.css" integrity="sha256-zQ0LblD/Af8vOppw18&#43;2anxsuaz3pWYyVWi&#43;bTvTH8Q="><script type="text/javascript" src="https://imagicw.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.bcff85fb5e00d68802850b393ac7792c997f722f536f38e26638c46dca8e5eb6.js" integrity="sha256-vP&#43;F&#43;14A1ogChQs5Osd5LJl/ci9TbzjiZjjEbcqOXrY="></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.615590a2ca2b667afa7c02ef396f5500b62e22795ddbb46448f90494605d09a5.js" integrity="sha256-YVWQosorZnr6fALvOW9VALYuInld27RkSPkElGBdCaU="></script><script type="text/javascript" src="/lib/lunr/lunr.min.df84a2d58ea594c04a3371b48d020b55ea10284c2ec636e4e331965d7313e29b.js" integrity="sha256-34Si1Y6llMBKM3G0jQILVeoQKEwuxjbk4zGWXXMT4ps="></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.8127f0ca4cabc7246f3620f3ef3bf9b1db02805dfe03d6d4c57bc74bc0bf6eea.js" integrity="sha256-gSfwykyrxyRvNiDz7zv5sdsCgF3&#43;A9bUxXvHS8C/buo="></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.df40c83b86d7cea2122cd35d56db3e6e4bc34b09a62755f0f3c48b5e9c66a8a4.js" integrity="sha256-30DIO4bXzqISLNNdVts&#43;bkvDSwmmJ1Xw88SLXpxmqKQ="></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.fb649fcae62177dfe63e67081ddceb830b5ce1f05a4184e9bbb7d87ac4b8f4e5.js" integrity="sha256-&#43;2SfyuYhd9/mPmcIHdzrgwtc4fBaQYTpu7fYesS49OU="></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.8a7739925f4c03586479852df840b7061948832a7fda30c8c812d2ea4dd4c4f2.js" integrity="sha256-inc5kl9MA1hkeYUt&#43;EC3BhlIgyp/2jDIyBLS6k3UxPI="></script><script type="text/javascript" src="/lib/sharer/sharer.min.9c88f86c7f0820287113f6236200459832693656e80d7556cc80a93dfbd45813.js" integrity="sha256-nIj4bH8IIChxE/YjYgBFmDJpNlboDXVWzICpPfvUWBM="></script><script type="text/javascript" src="/lib/katex/katex.min.17f5dd6b9f123dd7140abfb18521b3f4c036cd004f6f40121182a8865f140877.js" integrity="sha256-F/Xda58SPdcUCr&#43;xhSGz9MA2zQBPb0ASEYKohl8UCHc="></script><script type="text/javascript" src="/lib/katex/auto-render.min.f74776a677f0d2be0af0264058f928e2ba455d0b19bc985304660d922a43a6b2.js" integrity="sha256-90d2pnfw0r4K8CZAWPko4rpFXQsZvJhTBGYNkipDprI="></script><script type="text/javascript" src="/lib/katex/copy-tex.min.2ab2237329021bc443986c8327f6e61357fb68a54e5d233d224023718c02207d.js" integrity="sha256-KrIjcykCG8RDmGyDJ/bmE1f7aKVOXSM9IkAjcYwCIH0="></script><script type="text/javascript" src="/lib/katex/mhchem.min.5cea356d6025c5a2f18c454c83ec5674dbb04fab1cd1d75569e77788c6b6f888.js" integrity="sha256-XOo1bWAlxaLxjEVMg&#43;xWdNuwT6sc0ddVaed3iMa2&#43;Ig="></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.e55842a856a6d829feca3c3ad736c136b6c7549e9247274f78aa296259e06e24.js" integrity="sha256-5VhCqFam2Cn&#43;yjw61zbBNrbHVJ6SRydPeKopYlngbiQ="></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":12},"comment":{},"cookieconsent":{"content":{"dismiss":"åŒæ„","link":"äº†è§£æ›´å¤š","message":"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒ."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.f51938f3065a40ee841bcb558e4330e31fd26c0ea55343fff8770b88b0319a3c.js" integrity="sha256-9Rk48wZaQO6EG8tVjkMw4x/SbA6lU0P/&#43;HcLiLAxmjw="></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-CZYD518BBX', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-CZYD518BBX" async></script></body>
</html>
